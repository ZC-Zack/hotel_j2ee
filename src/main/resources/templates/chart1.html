<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<html>
<title>图表</title>
<script
	src=" https://cdnjs.cloudflare.com/ajax/libs/echarts/3.4.0/echarts.min.js "></script>
<body>
<div class="myechart1"
	 style=" margin-left: 100px;margin-top: 100px;float: left;">
	<div id="myechart1" style="width:500px; height:500px;"></div>
</div>
<div class="myechart2"
	 style=" margin-left: 100px;margin-top: 100px;float: left;">
	<div id="myechart2" style="width:500px; height:500px;"></div>
</div>
<script>
    //创建对象
    var xmlHttp;
    //有的话
    if (window.XMLHttpRequest) {
        xmlHttp = new XMLHttpRequest();
    } else {
        //没有 是老版本的ie，已分装好的对象
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    //相当于重写
    xmlHttp.onreadystatechange = function() {
        //readyState状态信息改变就会有该事件
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
            console.log(xmlHttp.responseText);
            //解析成js对象
            var dataObj = eval("(" + xmlHttp.responseText + ")");

            console.log(dataObj.chart1.length);
            // 基于准备好的dom，初始化echarts图表
            var myechart1 = echarts.init(document
                .getElementById("myechart1"));
            var option1 = {
                title : {
                    text : '季度房间报表',
                    subtext : '每季度预订出的房间',
                    x : 'center'
                },
                toolbox : {
                    feature : {
                        saveAsImage : {}
                    }
                },
                tooltip : {
                    trigger : 'item',
                    formatter : "{a} <br/>{b} : {c} ({d}%)"
                },
                legend : {
                    orient : 'vertical',
                    left : 'left',
                    data : [ '第一季度', '第二季度', '第三季度', '第四季度' ]
                },
                series : [ {
                    name : '季度:',
                    type : 'pie',
                    radius : '55%',
                    center : [ '50%', '60%' ],
                    data : [ {
                        value : dataObj.chart1[0].value[0]+dataObj.chart1[0].value[1]+dataObj.chart1[0].value[2],
                        name : '第一季度'
                    }, {
                        value : dataObj.chart1[0].value[3]+dataObj.chart1[0].value[4]+dataObj.chart1[0].value[5],
                        name : '第二季度'
                    }, {
                        value : dataObj.chart1[0].value[6]+dataObj.chart1[0].value[7]+dataObj.chart1[0].value[8],
                        name : '第三季度'
                    }, {
                        value : dataObj.chart1[0].value[9]+dataObj.chart1[0].value[10]+dataObj.chart1[0].value[11],
                        name : '第四季度'
                    }, ],
                    itemStyle : {
                        emphasis : {
                            shadowBlur : 10,
                            shadowOffsetX : 0,
                            shadowColor : 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                } ]
            };
            //date重新配置
            myechart1.setOption(option1);
            var myechart2 = echarts.init(document
                .getElementById("myechart2"));
            var option2 = {
                title : {
                    text : '季度利润报表',
                    subtext : '每季度酒店利润',
                    x : 'center'
                },
                toolbox : {
                    feature : {
                        saveAsImage : {}
                    }
                },
                tooltip : {
                    trigger : 'item',
                    formatter : "{a} <br/>{b} : {c} ({d}%)"
                },
                legend : {
                    orient : 'vertical',
                    left : 'left',
                    data : [ '第一季度', '第二季度', '第三季度', '第四季度' ]
                },
                series : [ {
                    name : '季度：',
                    type : 'pie',
                    radius : '55%',
                    center : [ '50%', '60%' ],
                    data : [ {
                        value : dataObj.chart1[0].money[0]+dataObj.chart1[0].money[1]+dataObj.chart1[0].money[2],
                        name : '第一季度'
                    }, {
                        value : dataObj.chart1[0].money[3]+dataObj.chart1[0].money[4]+dataObj.chart1[0].money[5],
                        name : '第二季度'
                    }, {
                        value : dataObj.chart1[0].money[6]+dataObj.chart1[0].money[7]+dataObj.chart1[0].money[8],
                        name : '第三季度'
                    }, {
                        value : dataObj.chart1[0].money[9]+dataObj.chart1[0].money[10]+dataObj.chart1[0].money[11],
                        name : '第四季度'
                    }, ],
                    itemStyle : {
                        emphasis : {
                            shadowBlur : 10,
                            shadowOffsetX : 0,
                            shadowColor : 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                } ]
            };
            myechart2.setOption(option2);
        }
    };
    //规定请求类型，文件在服务器位置，是否异步处理
    xmlHttp.open("get", "getAjaxInfo?action=jsonArray", true);
    //将请求发送到服务器
    xmlHttp.send();
</script>

</body>

</html>